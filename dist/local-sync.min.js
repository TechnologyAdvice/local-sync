!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LocalSync=t():e.LocalSync=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u="default",i="ls",c=".",a=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},f=function(e){return localStorage.getItem(e)},s=function(e,t){return localStorage.setItem(e,t)},l=function(e){return localStorage.removeItem(e)},y=function(e){return localStorage.key(e)},p=function(){return localStorage.length},h=function(e){if("string"!=typeof e)throw new Error('LocalSync "bucket" must be a string.');if(e.includes(" "))throw new Error('LocalSync "bucket" cannot contain spaces.')},v=function(e){if("string"!=typeof e)throw new Error('LocalSync "key" parameter must be a string.');if(e.includes(c))throw new Error('LocalSync "key" cannot contain '+c+".")},d=function(e){var t=["[object Array]","[object Null]","[object Number]","[object Object]","[object String]","[object Undefined]"],n=Object.prototype.toString.call(e);if(!t.some(function(e){return n===e}))throw new Error('LocalSync "value" of type '+n+" is not supported.")},b=function(){function e(){r(this,e),this._bucket=u}return o(e,[{key:"_mapKeys",value:function(e){for(var t=[],n=p()-1;n>=0;--n){var r=y(n);r.startsWith(this._prefixedBucket())&&t.unshift(e(this._shortKey(r)))}return t}},{key:"_prefixedBucket",value:function(){return[i,this._bucket].join(c)}},{key:"_prefixedKey",value:function(e){return[this._prefixedBucket(),e].join(c)}},{key:"_shortKey",value:function(e){var t=new RegExp(a(c)),n=new RegExp(a(this._prefixedBucket()),"g");return e.replace(n,"").replace(t,"")}},{key:"setBucket",value:function(e){h(e),this._bucket=e}},{key:"get",value:function(e){v(e);var t=f(this._prefixedKey(e));try{return"undefined"===t?void 0:JSON.parse(t)}catch(n){throw console.error("Could not JSON.parse() value:",t),n}}},{key:"set",value:function(e,t){return v(e),d(t),s(this._prefixedKey(e),JSON.stringify(t)),this.get(e)}},{key:"put",value:function(e,t){return v(e),d(t),this.set(e,Object.assign(this.get(e),t))}},{key:"remove",value:function(e){v(e);var t=this.get(e);return l(this._prefixedKey(e)),t}},{key:"all",value:function(){var e=this;return this._mapKeys(function(t){return n({},t,e.get(t))})}},{key:"keys",value:function(){return this._mapKeys(function(e){return e})}},{key:"values",value:function(){var e=this;return this._mapKeys(function(t){return e.get(t)})}},{key:"clear",value:function(){var e=this;this.all().forEach(function(t){e.remove(Object.keys(t)[0])})}}]),e}();t["default"]=b,e.exports=t["default"]}])});